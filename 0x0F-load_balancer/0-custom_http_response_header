#!/bin/bash

# Update and install nginx
sudo apt update
sudo apt install -y nginx

# Ensure nginx is started
sudo systemctl start nginx
sudo systemctl enable nginx

# Configure nginx to add a custom header
# Get the hostname of the machine
HOSTNAME=$(hostname)

# Configure the nginx to add the X-Served-By header
echo "Adding custom header to nginx configuration"
sudo sed -i '/server_name _;/a \\tadd_header X-Served-By '"$HOSTNAME"';' /etc/nginx/sites-available/default

# Restart nginx to apply changes
sudo systemctl restart nginx

echo "Nginx has been configured with custom HTTP header."
